---
import { getDateDifference } from "@utils/dates.ts";
import { getI18n } from "@i18n/index";

const { currentLocale } = Astro;
const i18n = getI18n({ currentLocale });

interface Props {
  date_start: string;
  date_end?: string;
  title: string;
  company: string;
  description: string;
  tags: Array<{ name: string; class: string; icon: any }>;
}

const { date_start, date_end, title, company, description, tags } = Astro.props;
const dateDiff = getDateDifference(date_start, date_end || "");

const getLocalMonthName = (date: string) => {
  const dateObj = new Date(date);
  const month = dateObj.toLocaleString("default", { month: "long" });
  return month;
};
---

<li class="mb-10 ms-8 pr-28">
  <div
    class="absolute size-3 bg-gray-200 rounded-full mt-2.5 -start-1.5 border border-white dark:border-gray-900 dark:bg-gray-700"
  >
  </div>

  <ul class="flex gap-2 flex-row flex-wrap mt-2 mb-2">
    {
      tags.map((tag) => (
        <li>
          <span
            class={`flex justify-center items-center gap-x-2 border-2 rounded-full text-sm font-bold ${tag.class} py-1 px-2.5 `}
          >
            <tag.icon class="size-5" />
            {tag.name}
          </span>
        </li>
      ))
    }
  </ul>
  <div>
    <time class="mb-1 text-sm font-bold">{date_start}</time>
    -
    <time class="mb-1 text-sm font-bold"
      >{date_end || `${i18n.EXPERIENCE_CURRENT}`}
      <span class="text-sm opacity-80 ml-2">{dateDiff}</span>
    </time>
    <h3 class="text-2xl font-bold text-blue-400">
      {title}
    </h3>
    <h4 class="text-xl mb-2">
      {company}
    </h4>
    <p class="mb-4 text-base font-normal text-pretty text-gray-300">
      {description}
    </p>
  </div>
</li>
